(()=>{"use strict";class e{constructor(){this.header=document.querySelector("header"),this.hamburger=document.querySelector(".hamburger"),this.navLinks=document.querySelector(".nav-links"),this.scrollThreshold=50}init(){this.hamburger&&this.navLinks&&(this.hamburger.addEventListener("click",()=>this.toggleMenu()),this.navLinks.querySelectorAll("a").forEach(e=>e.addEventListener("click",()=>this.closeMenu())),window.addEventListener("scroll",()=>this.handleScroll()))}toggleMenu(){this.navLinks.classList.toggle("nav-active"),this.hamburger.classList.toggle("toggle")}closeMenu(){this.navLinks.classList.remove("nav-active"),this.hamburger.classList.remove("toggle")}handleScroll(){this.header&&(window.scrollY>this.scrollThreshold?(this.header.style.backgroundColor="rgba(10, 25, 47, 0.85)",this.header.style.backdropFilter="blur(10px)"):(this.header.style.backgroundColor="",this.header.style.backdropFilter=""))}}class t{constructor(){this.form=document.querySelector(".contact-form"),this.config={serviceId:"service_6pjq45y",templateId:"template_acxd2eb",publicKey:"DHIoieBVznOFolr6S",rateLimit:{max:3,window:6e4},validation:{minMessage:10,maxMessage:1e3}}}init(){this.form&&("undefined"!=typeof emailjs&&emailjs.init(this.config.publicKey),this.form.addEventListener("submit",e=>this.handleSubmit(e)),this.addValidation())}async handleSubmit(e){if(e.preventDefault(),!this.checkRateLimit())return void this.showMessage("Please wait before sending another message","error");const t=this.getFormData(),s=this.validate(t);if(s.valid){this.setLoading(!0);try{200===(await emailjs.sendForm(this.config.serviceId,this.config.templateId,this.form)).status&&(this.showMessage("Message sent successfully!","success"),this.form.reset(),this.updateRateLimit())}catch(e){this.showMessage("Failed to send message. Please try again.","error")}finally{this.setLoading(!1)}}else this.showMessage(s.message,"error")}getFormData(){return{name:this.form.name?.value.trim()||"",email:this.form.email?.value.trim()||"",message:this.form.message?.value.trim()||""}}validate(e){return e.name.length<2?{valid:!1,message:"Name must be at least 2 characters"}:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)?e.message.length<this.config.validation.minMessage?{valid:!1,message:`Message must be at least ${this.config.validation.minMessage} characters`}:e.message.length>this.config.validation.maxMessage?{valid:!1,message:`Message must be less than ${this.config.validation.maxMessage} characters`}:{valid:!0}:{valid:!1,message:"Please enter a valid email"}}checkRateLimit(){const e=Date.now();try{const t=localStorage.getItem("contactRateLimit");if(!t)return!0;const s=JSON.parse(t);return e>s.reset||s.count<this.config.rateLimit.max}catch{return!0}}updateRateLimit(){const e="contactRateLimit",t=Date.now();try{const s=localStorage.getItem(e);let a=s?JSON.parse(s):null;!a||t>a.reset?a={count:1,reset:t+this.config.rateLimit.window}:a.count++,localStorage.setItem(e,JSON.stringify(a))}catch{}}setLoading(e){const t=this.form.querySelector('button[type="submit"]');t&&(t.disabled=e,t.textContent=e?"Sending...":"Send Message")}showMessage(e,t){const s=document.querySelector(".form-message");s&&s.remove();const a=document.createElement("div");a.className=`form-message form-message-${t}`,a.textContent=e,this.form.parentElement?.insertBefore(a,this.form.nextSibling),setTimeout(()=>a.remove(),5e3)}addValidation(){const e=this.form.querySelector("#email"),t=this.form.querySelector("#message");if(e&&e.addEventListener("blur",()=>{const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value);e.classList.toggle("error",!t&&e.value.length>0)}),t){const e=document.createElement("div");e.className="message-counter",t.parentElement?.appendChild(e),t.addEventListener("input",()=>{const s=t.value.length;e.textContent=`${s}/${this.config.validation.maxMessage}`,e.classList.toggle("error",s>this.config.validation.maxMessage)})}}}const s=()=>{(new e).init(),(new t).init()};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):s()})();